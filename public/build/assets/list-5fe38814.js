import{_ as R,a as z}from"./AppDrawerHeaderSection-c7aa5abe.js";import{r as h,e as H}from"./validators-4dbf72f5.js";import{r as i,o as T,f as J,e as t,b as e,n as a,a3 as f,a6 as Q,a7 as U,v as b,aE as C,av as G,a5 as O,a as K,c as L,d as N,x as q,a1 as W,s as $}from"./main-8f4bf164.js";import{V as X,_ as Y}from"./VForm-aacac416.js";import{P as Z}from"./vue3-perfect-scrollbar.esm-6646fc21.js";import{V as M}from"./VCard-b110a604.js";import{V as E}from"./VCardText-e36fdb2d.js";import{V as ee,a as S}from"./VRow-bdc8a60e.js";import{V as ae}from"./VNavigationDrawer-ac0d6395.js";import{b as te,V as le,p as oe}from"./VPagination-fa19659c.js";import{$ as re}from"./api-a3f27960.js";import{u as se}from"./useApi-e3dff6f1.js";import{c as ie}from"./createUrl-4ac06473.js";import{V as ne}from"./VSpacer-031748a5.js";import{V as F}from"./VDivider-730229d6.js";import"./VTextField-6d0acdda.js";import"./transition-be9978a2.js";import"./easing-9f15041e.js";import"./forwardRefs-8348545e.js";import"./VImg-2da5316b.js";import"./VAvatar-f2225889.js";import"./VOverlay-aedc1a4f.js";import"./lazy-5892a07e.js";import"./ssrBoot-dc5ad16a.js";import"./VList-e5202c5f.js";import"./dialog-transition-169eb89b.js";import"./VMenu-83c355c3.js";import"./VCheckboxBtn-0bc48480.js";import"./index-51d05da2.js";const de={__name:"AddNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(A,{emit:v}){const x=A,u=v,D=i(!1),c=i(),w=i(""),_=i(""),y=i(""),P=()=>{u("update:isDrawerOpen",!1),C(()=>{var l,r;(l=c.value)==null||l.reset(),(r=c.value)==null||r.resetValidation()})},n=()=>{var l;(l=c.value)==null||l.validate().then(({valid:r})=>{r&&(u("userData",{id:0,name:w.value,email:_.value,password:y.value}),u("update:isDrawerOpen",!1),C(()=>{var g,m;(g=c.value)==null||g.reset(),(m=c.value)==null||m.resetValidation()}))})},d=l=>{u("update:isDrawerOpen",l)};return(l,r)=>{const g=R,m=Y;return T(),J(ae,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":x.isDrawerOpen,"onUpdate:modelValue":d},{default:t(()=>[e(g,{title:"Add User",onCancel:P}),e(a(Z),{options:{wheelPropagation:!1}},{default:t(()=>[e(M,{flat:""},{default:t(()=>[e(E,null,{default:t(()=>[e(X,{ref_key:"refForm",ref:c,modelValue:a(D),"onUpdate:modelValue":r[3]||(r[3]=p=>f(D)?D.value=p:null),onSubmit:Q(n,["prevent"])},{default:t(()=>[e(ee,null,{default:t(()=>[e(S,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(w),"onUpdate:modelValue":r[0]||(r[0]=p=>f(w)?w.value=p:null),rules:["requiredValidator"in l?l.requiredValidator:a(h)],label:"Full Name",placeholder:"John Doe"},null,8,["modelValue","rules"])]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(_),"onUpdate:modelValue":r[1]||(r[1]=p=>f(_)?_.value=p:null),rules:["requiredValidator"in l?l.requiredValidator:a(h),"emailValidator"in l?l.emailValidator:a(H)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(y),"onUpdate:modelValue":r[2]||(r[2]=p=>f(y)?y.value=p:null),type:"password",rules:["requiredValidator"in l?l.requiredValidator:a(h)],label:"Password"},null,8,["modelValue","rules"])]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(U,{type:"submit",class:"me-3"},{default:t(()=>[b(" Submit ")]),_:1}),e(U,{type:"reset",variant:"outlined",color:"secondary",onClick:P},{default:t(()=>[b(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ue={class:"me-3 d-flex gap-3"},me={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},pe={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},ce={class:"text-sm text-disabled mb-0"},ze={__name:"list",async setup(A){let v,x;const u=i(!1),D=async V=>{await re("/dashboard/admin/user",{method:"POST",body:V}),p()},c=[{title:"User",key:"name"},{title:"Email",key:"email"},{title:"Created at",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],w=i(""),_=i(),y=i(),P=i(),n=i(10),d=i(1),l=i(),r=i(),g=V=>{var s,B;d.value=V.page,l.value=(s=V.sortBy[0])==null?void 0:s.key,r.value=(B=V.sortBy[0])==null?void 0:B.order},{data:m,execute:p}=([v,x]=G(()=>se(ie("/dashboard/admin/user",{query:{q:w,status:P,plan:y,role:_,itemsPerPage:n,page:d,sortBy:l,orderBy:r}}))),v=await v,x(),v),I=O(()=>m.value.result.data),k=O(()=>m.value.result.total);return(V,s)=>{const B=z,j=K("IconBtn");return T(),L("section",null,[e(M,null,{default:t(()=>[e(E,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[N("div",ue,[e(B,{"model-value":a(n),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":s[0]||(s[0]=o=>n.value=parseInt(o,10))},null,8,["model-value"])]),e(ne),N("div",me,[e(U,{"prepend-icon":"tabler-plus",onClick:s[1]||(s[1]=o=>u.value=!0)},{default:t(()=>[b(" Add New User ")]),_:1})])]),_:1}),e(F),e(a(le),{"items-per-page":a(n),"onUpdate:itemsPerPage":s[3]||(s[3]=o=>f(n)?n.value=o:null),page:a(d),"onUpdate:page":s[4]||(s[4]=o=>f(d)?d.value=o:null),items:a(I),"items-length":a(k),headers:c,class:"text-no-wrap","onUpdate:options":g},{"item.created_at":t(({item:o})=>[b(q(new Date(o.created_at).toDateString()),1)]),"item.actions":t(({item:o})=>[e(j,{to:{name:"users-id",params:{id:o.id}}},{default:t(()=>[e(W,{icon:"tabler-eye"})]),_:2},1032,["to"])]),bottom:t(()=>[e(F),N("div",pe,[N("p",ce,q(a(oe)({page:a(d),itemsPerPage:a(n)},a(k))),1),e(te,{modelValue:a(d),"onUpdate:modelValue":s[2]||(s[2]=o=>f(d)?d.value=o:null),length:Math.ceil(a(k)/a(n)),"total-visible":V.$vuetify.display.xs?1:Math.ceil(a(k)/a(n))},{prev:t(o=>[e(U,$({variant:"tonal",color:"default"},o,{icon:!1}),{default:t(()=>[b(" Previous ")]),_:2},1040)]),next:t(o=>[e(U,$({variant:"tonal",color:"default"},o,{icon:!1}),{default:t(()=>[b(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(de,{isDrawerOpen:a(u),"onUpdate:isDrawerOpen":s[5]||(s[5]=o=>f(u)?u.value=o:null),onUserData:D},null,8,["isDrawerOpen"])])}}};export{ze as default};
