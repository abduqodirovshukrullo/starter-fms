import{_ as z,a as E}from"./AppDrawerHeaderSection-6fa416fb.js";import{r as A}from"./validators-4dbf72f5.js";import{r as i,o as $,f as H,e as t,b as e,m as a,a2 as V,a5 as Q,a6 as D,t as v,aD as B,au as G,a4 as C,c as I,d as S,v as k,q as R}from"./main-fa96fe76.js";import{V as J,_ as K}from"./VForm-8f6e8f3f.js";import{P as L}from"./vue3-perfect-scrollbar.esm-8a18cbbb.js";import{V as T}from"./VCard-176ad7dd.js";import{V as F}from"./VCardText-8a86c634.js";import{V as W,a as O}from"./VRow-43f5ef13.js";import{V as X}from"./VNavigationDrawer-cc09e668.js";import{a as Y,b as Z,V as ee,p as te}from"./VPagination-8c42e200.js";import{$ as ae}from"./api-798ac130.js";import{u as oe}from"./useApi-b6e3fef1.js";import{c as le}from"./createUrl-301e47f6.js";import{V as re}from"./VSpacer-f316e7fe.js";import{V as q}from"./VDivider-62271e55.js";import"./VTextField-24e4fff8.js";import"./transition-8459a07e.js";import"./easing-9f15041e.js";import"./forwardRefs-8348545e.js";import"./VImg-15db7f2c.js";import"./VAvatar-2e40be3b.js";import"./VOverlay-d4cb1d62.js";import"./lazy-c22c28d8.js";import"./ssrBoot-0f84079e.js";import"./VList-7d7067fc.js";import"./dialog-transition-794a34d6.js";import"./VMenu-b9c3e4a8.js";import"./VCheckboxBtn-96c2df87.js";import"./index-51d05da2.js";const se={__name:"AddNewRobotDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","robotData"],setup(U,{emit:b}){const x=U,u=b,g=i(!1),p=i(),_=i(""),w=i(""),h=()=>{u("update:isDrawerOpen",!1),B(()=>{var l,r;(l=p.value)==null||l.reset(),(r=p.value)==null||r.resetValidation()})},d=()=>{var l;(l=p.value)==null||l.validate().then(({valid:r})=>{r&&(u("robotData",{id:0,name:_.value,number:w.value,type:"robot"}),u("update:isDrawerOpen",!1),B(()=>{var y,m;(y=p.value)==null||y.reset(),(m=p.value)==null||m.resetValidation()}))})},n=l=>{u("update:isDrawerOpen",l)};return(l,r)=>{const y=z,m=K;return $(),H(X,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":x.isDrawerOpen,"onUpdate:modelValue":n},{default:t(()=>[e(y,{title:"Add Robot",onCancel:h}),e(a(L),{options:{wheelPropagation:!1}},{default:t(()=>[e(T,{flat:""},{default:t(()=>[e(F,null,{default:t(()=>[e(J,{ref_key:"refForm",ref:p,modelValue:a(g),"onUpdate:modelValue":r[2]||(r[2]=c=>V(g)?g.value=c:null),onSubmit:Q(d,["prevent"])},{default:t(()=>[e(W,null,{default:t(()=>[e(O,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(_),"onUpdate:modelValue":r[0]||(r[0]=c=>V(_)?_.value=c:null),rules:["requiredValidator"in l?l.requiredValidator:a(A)],label:"Name",placeholder:""},null,8,["modelValue","rules"])]),_:1}),e(O,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(w),"onUpdate:modelValue":r[1]||(r[1]=c=>V(w)?w.value=c:null),rules:["requiredValidator"in l?l.requiredValidator:a(A)],label:"Number",placeholder:""},null,8,["modelValue","rules"])]),_:1}),e(O,{cols:"12"},{default:t(()=>[e(D,{type:"submit",class:"me-3"},{default:t(()=>[v(" Submit ")]),_:1}),e(D,{type:"reset",variant:"outlined",color:"secondary",onClick:h},{default:t(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ie={class:"me-3 d-flex gap-3"},ne={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ue={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},de={class:"text-sm text-disabled mb-0"},je={__name:"main",async setup(U){let b,x;const u=i(!1),g=async f=>{await ae("/dashboard/admin/fleet",{method:"POST",body:f}),c()},p=i(""),_=i(),w=i(),h=i(),d=i(10),n=i(1),l=i(),r=i(),y=f=>{var s,N;n.value=f.page,l.value=(s=f.sortBy[0])==null?void 0:s.key,r.value=(N=f.sortBy[0])==null?void 0:N.order},{data:m,execute:c}=([b,x]=G(()=>oe(le("/dashboard/admin/fleet",{query:{q:p,type:"robot",status:h,plan:w,role:_,itemsPerPage:d,page:n,sortBy:l,orderBy:r}}))),b=await b,x(),b),M=C(()=>m.value.result.data),P=C(()=>m.value.result.total),j=[{title:"Name",key:"name"},{title:"Number",key:"number"},{title:"Status",key:"status"}];return(f,s)=>{const N=E;return $(),I("section",null,[e(T,null,{default:t(()=>[e(F,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[S("div",ie,[e(N,{items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"}})]),e(re),S("div",ne,[e(D,{"prepend-icon":"tabler-plus",onClick:s[0]||(s[0]=o=>u.value=!0)},{default:t(()=>[v(" Add new robot ")]),_:1})])]),_:1}),e(q),e(a(ee),{"items-per-page":a(d),"onUpdate:itemsPerPage":s[2]||(s[2]=o=>V(d)?d.value=o:null),page:a(n),"onUpdate:page":s[3]||(s[3]=o=>V(n)?n.value=o:null),items:a(M),"items-length":a(P),headers:j,class:"text-no-wrap","onUpdate:options":y},{"item.name":t(({item:o})=>[v(k(o.name),1)]),"item.status":t(({item:o})=>[e(Y,{color:"success",size:"small",label:""},{default:t(()=>[v(k(o.status),1)]),_:2},1024)]),bottom:t(()=>[e(q),S("div",ue,[S("p",de,k(a(te)({page:a(n),itemsPerPage:a(d)},a(P))),1),e(Z,{modelValue:a(n),"onUpdate:modelValue":s[1]||(s[1]=o=>V(n)?n.value=o:null),length:Math.ceil(a(P)/a(d)),"total-visible":f.$vuetify.display.xs?1:Math.ceil(a(P)/a(d))},{prev:t(o=>[e(D,R({variant:"tonal",color:"default"},o,{icon:!1}),{default:t(()=>[v(" Previous ")]),_:2},1040)]),next:t(o=>[e(D,R({variant:"tonal",color:"default"},o,{icon:!1}),{default:t(()=>[v(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(se,{isDrawerOpen:a(u),"onUpdate:isDrawerOpen":s[4]||(s[4]=o=>V(u)?u.value=o:null),onRobotData:g},null,8,["isDrawerOpen"])])}}};export{je as default};
