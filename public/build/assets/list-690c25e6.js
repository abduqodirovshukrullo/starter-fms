import{V as R,_ as z,a as H}from"./VNavigationDrawer-207d7227.js";import{r as h,e as J}from"./validators-4dbf72f5.js";import{r as i,o as T,f as Q,e as t,b as e,m as a,a2 as f,a5 as G,a6 as U,t as D,aD as A,au as K,a4 as C,a as L,c as W,d as N,v as O,a0 as X,q as $}from"./main-35046f7b.js";import{V as Y,_ as Z}from"./VForm-afec6604.js";import{P as ee}from"./vue3-perfect-scrollbar.esm-2d67c3cd.js";import{V as M}from"./VCard-bb34025d.js";import{V as I}from"./VCardText-4b5cc6c9.js";import{V as ae,a as S}from"./VRow-2f8e02d9.js";import{b as te,V as le,p as oe}from"./VPagination-e885e05e.js";import{$ as se}from"./api-a5a68a69.js";import{u as re}from"./useApi-6a8bd8e9.js";import{c as ie}from"./createUrl-7df0b568.js";import{V as ne}from"./VSpacer-d5155e0d.js";import{V as F}from"./VDivider-06704bd7.js";import"./VTextField-88c913f0.js";import"./VImg-f34c3825.js";import"./forwardRefs-6ea3df5c.js";import"./VOverlay-db7746b0.js";import"./VList-535bf9a9.js";import"./VAvatar-60ec96c4.js";import"./dialog-transition-deb1736e.js";import"./VMenu-ad3df23a.js";import"./VCheckboxBtn-66f10e00.js";import"./index-51d05da2.js";const de={__name:"AddNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(q,{emit:v}){const P=q,u=v,b=i(!1),c=i(),w=i(""),_=i(""),y=i(""),x=()=>{u("update:isDrawerOpen",!1),A(()=>{var l,s;(l=c.value)==null||l.reset(),(s=c.value)==null||s.resetValidation()})},n=()=>{var l;(l=c.value)==null||l.validate().then(({valid:s})=>{s&&(u("userData",{id:0,name:w.value,email:_.value,password:y.value}),u("update:isDrawerOpen",!1),A(()=>{var g,m;(g=c.value)==null||g.reset(),(m=c.value)==null||m.resetValidation()}))})},d=l=>{u("update:isDrawerOpen",l)};return(l,s)=>{const g=z,m=Z;return T(),Q(R,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":P.isDrawerOpen,"onUpdate:modelValue":d},{default:t(()=>[e(g,{title:"Add User",onCancel:x}),e(a(ee),{options:{wheelPropagation:!1}},{default:t(()=>[e(M,{flat:""},{default:t(()=>[e(I,null,{default:t(()=>[e(Y,{ref_key:"refForm",ref:c,modelValue:a(b),"onUpdate:modelValue":s[3]||(s[3]=p=>f(b)?b.value=p:null),onSubmit:G(n,["prevent"])},{default:t(()=>[e(ae,null,{default:t(()=>[e(S,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(w),"onUpdate:modelValue":s[0]||(s[0]=p=>f(w)?w.value=p:null),rules:["requiredValidator"in l?l.requiredValidator:a(h)],label:"Full Name",placeholder:"John Doe"},null,8,["modelValue","rules"])]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(_),"onUpdate:modelValue":s[1]||(s[1]=p=>f(_)?_.value=p:null),rules:["requiredValidator"in l?l.requiredValidator:a(h),"emailValidator"in l?l.emailValidator:a(J)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(y),"onUpdate:modelValue":s[2]||(s[2]=p=>f(y)?y.value=p:null),type:"password",rules:["requiredValidator"in l?l.requiredValidator:a(h)],label:"Password"},null,8,["modelValue","rules"])]),_:1}),e(S,{cols:"12"},{default:t(()=>[e(U,{type:"submit",class:"me-3"},{default:t(()=>[D(" Submit ")]),_:1}),e(U,{type:"reset",variant:"outlined",color:"secondary",onClick:x},{default:t(()=>[D(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ue={class:"me-3 d-flex gap-3"},me={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},pe={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},ce={class:"text-sm text-disabled mb-0"},Me={__name:"list",async setup(q){let v,P;const u=i(!1),b=async V=>{await se("/dashboard/admin/user",{method:"POST",body:V}),p()},c=[{title:"User",key:"name"},{title:"Email",key:"email"},{title:"Created at",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],w=i(""),_=i(),y=i(),x=i(),n=i(10),d=i(1),l=i(),s=i(),g=V=>{var r,B;d.value=V.page,l.value=(r=V.sortBy[0])==null?void 0:r.key,s.value=(B=V.sortBy[0])==null?void 0:B.order},{data:m,execute:p}=([v,P]=K(()=>re(ie("/dashboard/admin/user",{query:{q:w,status:x,plan:y,role:_,itemsPerPage:n,page:d,sortBy:l,orderBy:s}}))),v=await v,P(),v),j=C(()=>m.value.result.data),k=C(()=>m.value.result.total);return(V,r)=>{const B=H,E=L("IconBtn");return T(),W("section",null,[e(M,null,{default:t(()=>[e(I,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[N("div",ue,[e(B,{"model-value":a(n),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":r[0]||(r[0]=o=>n.value=parseInt(o,10))},null,8,["model-value"])]),e(ne),N("div",me,[e(U,{"prepend-icon":"tabler-plus",onClick:r[1]||(r[1]=o=>u.value=!0)},{default:t(()=>[D(" Add New User ")]),_:1})])]),_:1}),e(F),e(a(le),{"items-per-page":a(n),"onUpdate:itemsPerPage":r[3]||(r[3]=o=>f(n)?n.value=o:null),page:a(d),"onUpdate:page":r[4]||(r[4]=o=>f(d)?d.value=o:null),items:a(j),"items-length":a(k),headers:c,class:"text-no-wrap","onUpdate:options":g},{"item.created_at":t(({item:o})=>[D(O(new Date(o.created_at).toDateString()),1)]),"item.actions":t(({item:o})=>[e(E,{to:{name:"users-id",params:{id:o.id}}},{default:t(()=>[e(X,{icon:"tabler-eye"})]),_:2},1032,["to"])]),bottom:t(()=>[e(F),N("div",pe,[N("p",ce,O(a(oe)({page:a(d),itemsPerPage:a(n)},a(k))),1),e(te,{modelValue:a(d),"onUpdate:modelValue":r[2]||(r[2]=o=>f(d)?d.value=o:null),length:Math.ceil(a(k)/a(n)),"total-visible":V.$vuetify.display.xs?1:Math.ceil(a(k)/a(n))},{prev:t(o=>[e(U,$({variant:"tonal",color:"default"},o,{icon:!1}),{default:t(()=>[D(" Previous ")]),_:2},1040)]),next:t(o=>[e(U,$({variant:"tonal",color:"default"},o,{icon:!1}),{default:t(()=>[D(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(de,{isDrawerOpen:a(u),"onUpdate:isDrawerOpen":r[5]||(r[5]=o=>f(u)?u.value=o:null),onUserData:b},null,8,["isDrawerOpen"])])}}};export{Me as default};
