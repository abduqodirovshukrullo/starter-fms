import{V as z,_ as E,a as H}from"./VNavigationDrawer-207d7227.js";import{r as A}from"./validators-4dbf72f5.js";import{r as n,o as $,f as Q,e as t,b as e,m as a,a2 as V,a5 as G,a6 as D,t as v,aD as B,au as I,a4 as C,c as J,d as S,v as k,q as R}from"./main-35046f7b.js";import{V as K,_ as L}from"./VForm-afec6604.js";import{P as W}from"./vue3-perfect-scrollbar.esm-2d67c3cd.js";import{V as T}from"./VCard-bb34025d.js";import{V as F}from"./VCardText-4b5cc6c9.js";import{V as X,a as O}from"./VRow-2f8e02d9.js";import{a as Y,b as Z,V as ee,p as te}from"./VPagination-e885e05e.js";import{$ as ae}from"./api-a5a68a69.js";import{u as le}from"./useApi-6a8bd8e9.js";import{c as oe}from"./createUrl-7df0b568.js";import{V as re}from"./VSpacer-d5155e0d.js";import{V as q}from"./VDivider-06704bd7.js";import"./VTextField-88c913f0.js";import"./VImg-f34c3825.js";import"./forwardRefs-6ea3df5c.js";import"./VOverlay-db7746b0.js";import"./VList-535bf9a9.js";import"./VAvatar-60ec96c4.js";import"./dialog-transition-deb1736e.js";import"./VMenu-ad3df23a.js";import"./VCheckboxBtn-66f10e00.js";import"./index-51d05da2.js";const se={__name:"AddNewRobotDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","robotData"],setup(U,{emit:b}){const x=U,u=b,g=n(!1),p=n(),_=n(""),w=n(""),h=()=>{u("update:isDrawerOpen",!1),B(()=>{var o,r;(o=p.value)==null||o.reset(),(r=p.value)==null||r.resetValidation()})},d=()=>{var o;(o=p.value)==null||o.validate().then(({valid:r})=>{r&&(u("robotData",{id:0,name:_.value,number:w.value,type:"robot"}),u("update:isDrawerOpen",!1),B(()=>{var y,m;(y=p.value)==null||y.reset(),(m=p.value)==null||m.resetValidation()}))})},i=o=>{u("update:isDrawerOpen",o)};return(o,r)=>{const y=E,m=L;return $(),Q(z,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":x.isDrawerOpen,"onUpdate:modelValue":i},{default:t(()=>[e(y,{title:"Add Robot",onCancel:h}),e(a(W),{options:{wheelPropagation:!1}},{default:t(()=>[e(T,{flat:""},{default:t(()=>[e(F,null,{default:t(()=>[e(K,{ref_key:"refForm",ref:p,modelValue:a(g),"onUpdate:modelValue":r[2]||(r[2]=c=>V(g)?g.value=c:null),onSubmit:G(d,["prevent"])},{default:t(()=>[e(X,null,{default:t(()=>[e(O,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(_),"onUpdate:modelValue":r[0]||(r[0]=c=>V(_)?_.value=c:null),rules:["requiredValidator"in o?o.requiredValidator:a(A)],label:"Name",placeholder:""},null,8,["modelValue","rules"])]),_:1}),e(O,{cols:"12"},{default:t(()=>[e(m,{modelValue:a(w),"onUpdate:modelValue":r[1]||(r[1]=c=>V(w)?w.value=c:null),rules:["requiredValidator"in o?o.requiredValidator:a(A)],label:"Number",placeholder:""},null,8,["modelValue","rules"])]),_:1}),e(O,{cols:"12"},{default:t(()=>[e(D,{type:"submit",class:"me-3"},{default:t(()=>[v(" Submit ")]),_:1}),e(D,{type:"reset",variant:"outlined",color:"secondary",onClick:h},{default:t(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ne={class:"me-3 d-flex gap-3"},ie={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ue={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},de={class:"text-sm text-disabled mb-0"},qe={__name:"main",async setup(U){let b,x;const u=n(!1),g=async f=>{await ae("/dashboard/admin/fleet",{method:"POST",body:f}),c()},p=n(""),_=n(),w=n(),h=n(),d=n(10),i=n(1),o=n(),r=n(),y=f=>{var s,N;i.value=f.page,o.value=(s=f.sortBy[0])==null?void 0:s.key,r.value=(N=f.sortBy[0])==null?void 0:N.order},{data:m,execute:c}=([b,x]=I(()=>le(oe("/dashboard/admin/fleet",{query:{q:p,type:"robot",status:h,plan:w,role:_,itemsPerPage:d,page:i,sortBy:o,orderBy:r}}))),b=await b,x(),b),M=C(()=>m.value.result.data),P=C(()=>m.value.result.total),j=[{title:"Name",key:"name"},{title:"Number",key:"number"},{title:"Status",key:"status"}];return(f,s)=>{const N=H;return $(),J("section",null,[e(T,null,{default:t(()=>[e(F,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[S("div",ne,[e(N,{items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"}})]),e(re),S("div",ie,[e(D,{"prepend-icon":"tabler-plus",onClick:s[0]||(s[0]=l=>u.value=!0)},{default:t(()=>[v(" Add new robot ")]),_:1})])]),_:1}),e(q),e(a(ee),{"items-per-page":a(d),"onUpdate:itemsPerPage":s[2]||(s[2]=l=>V(d)?d.value=l:null),page:a(i),"onUpdate:page":s[3]||(s[3]=l=>V(i)?i.value=l:null),items:a(M),"items-length":a(P),headers:j,class:"text-no-wrap","onUpdate:options":y},{"item.name":t(({item:l})=>[v(k(l.name),1)]),"item.status":t(({item:l})=>[e(Y,{color:"success",size:"small",label:""},{default:t(()=>[v(k(l.status),1)]),_:2},1024)]),bottom:t(()=>[e(q),S("div",ue,[S("p",de,k(a(te)({page:a(i),itemsPerPage:a(d)},a(P))),1),e(Z,{modelValue:a(i),"onUpdate:modelValue":s[1]||(s[1]=l=>V(i)?i.value=l:null),length:Math.ceil(a(P)/a(d)),"total-visible":f.$vuetify.display.xs?1:Math.ceil(a(P)/a(d))},{prev:t(l=>[e(D,R({variant:"tonal",color:"default"},l,{icon:!1}),{default:t(()=>[v(" Previous ")]),_:2},1040)]),next:t(l=>[e(D,R({variant:"tonal",color:"default"},l,{icon:!1}),{default:t(()=>[v(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(se,{isDrawerOpen:a(u),"onUpdate:isDrawerOpen":s[4]||(s[4]=l=>V(u)?u.value=l:null),onRobotData:g},null,8,["isDrawerOpen"])])}}};export{qe as default};
