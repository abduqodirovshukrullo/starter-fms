import{V as z,_ as E,a as H}from"./VNavigationDrawer-207d7227.js";import{r as A}from"./validators-4dbf72f5.js";import{r as i,o as R,f as Q,e as a,b as e,m as t,a2 as V,a5 as G,a6 as D,t as v,aD as B,au as I,a4 as C,c as J,d as S,v as k,q}from"./main-35046f7b.js";import{V as K,_ as L}from"./VForm-afec6604.js";import{P as W}from"./vue3-perfect-scrollbar.esm-2d67c3cd.js";import{V as T}from"./VCard-bb34025d.js";import{V as F}from"./VCardText-4b5cc6c9.js";import{V as X,a as O}from"./VRow-2f8e02d9.js";import{a as Y,b as Z,V as ee,p as ae}from"./VPagination-e885e05e.js";import{$ as te}from"./api-a5a68a69.js";import{u as le}from"./useApi-6a8bd8e9.js";import{c as oe}from"./createUrl-7df0b568.js";import{V as se}from"./VSpacer-d5155e0d.js";import{V as $}from"./VDivider-06704bd7.js";import"./VTextField-88c913f0.js";import"./VImg-f34c3825.js";import"./forwardRefs-6ea3df5c.js";import"./VOverlay-db7746b0.js";import"./VList-535bf9a9.js";import"./VAvatar-60ec96c4.js";import"./dialog-transition-deb1736e.js";import"./VMenu-ad3df23a.js";import"./VCheckboxBtn-66f10e00.js";import"./index-51d05da2.js";const re={__name:"AddNewVehicleDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","robotData"],setup(U,{emit:_}){const h=U,u=_,g=i(!1),p=i(),b=i(""),w=i(""),x=()=>{u("update:isDrawerOpen",!1),B(()=>{var o,s;(o=p.value)==null||o.reset(),(s=p.value)==null||s.resetValidation()})},d=()=>{var o;(o=p.value)==null||o.validate().then(({valid:s})=>{s&&(u("robotData",{id:0,name:b.value,number:w.value,type:"vehicle"}),u("update:isDrawerOpen",!1),B(()=>{var y,m;(y=p.value)==null||y.reset(),(m=p.value)==null||m.resetValidation()}))})},n=o=>{u("update:isDrawerOpen",o)};return(o,s)=>{const y=E,m=L;return R(),Q(z,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":h.isDrawerOpen,"onUpdate:modelValue":n},{default:a(()=>[e(y,{title:"Add Vehicle",onCancel:x}),e(t(W),{options:{wheelPropagation:!1}},{default:a(()=>[e(T,{flat:""},{default:a(()=>[e(F,null,{default:a(()=>[e(K,{ref_key:"refForm",ref:p,modelValue:t(g),"onUpdate:modelValue":s[2]||(s[2]=c=>V(g)?g.value=c:null),onSubmit:G(d,["prevent"])},{default:a(()=>[e(X,null,{default:a(()=>[e(O,{cols:"12"},{default:a(()=>[e(m,{modelValue:t(b),"onUpdate:modelValue":s[0]||(s[0]=c=>V(b)?b.value=c:null),rules:["requiredValidator"in o?o.requiredValidator:t(A)],label:"Name",placeholder:""},null,8,["modelValue","rules"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(m,{modelValue:t(w),"onUpdate:modelValue":s[1]||(s[1]=c=>V(w)?w.value=c:null),rules:["requiredValidator"in o?o.requiredValidator:t(A)],label:"Number",placeholder:""},null,8,["modelValue","rules"])]),_:1}),e(O,{cols:"12"},{default:a(()=>[e(D,{type:"submit",class:"me-3"},{default:a(()=>[v(" Submit ")]),_:1}),e(D,{type:"reset",variant:"outlined",color:"secondary",onClick:x},{default:a(()=>[v(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},ie={class:"me-3 d-flex gap-3"},ne={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ue={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},de={class:"text-sm text-disabled mb-0"},$e={__name:"main",async setup(U){let _,h;const u=i(!1),g=async f=>{await te("/dashboard/admin/fleet",{method:"POST",body:f}),c()},p=i(""),b=i(),w=i(),x=i(),d=i(10),n=i(1),o=i(),s=i(),y=f=>{var r,N;n.value=f.page,o.value=(r=f.sortBy[0])==null?void 0:r.key,s.value=(N=f.sortBy[0])==null?void 0:N.order},{data:m,execute:c}=([_,h]=I(()=>le(oe("/dashboard/admin/fleet",{query:{q:p,type:"vehicle",status:x,plan:w,role:b,itemsPerPage:d,page:n,sortBy:o,orderBy:s}}))),_=await _,h(),_),M=C(()=>m.value.result.data),P=C(()=>m.value.result.total),j=[{title:"Name",key:"name"},{title:"Number",key:"number"},{title:"Status",key:"status"}];return(f,r)=>{const N=H;return R(),J("section",null,[e(T,null,{default:a(()=>[e(F,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[S("div",ie,[e(N,{items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"}})]),e(se),S("div",ne,[e(D,{"prepend-icon":"tabler-plus",onClick:r[0]||(r[0]=l=>u.value=!0)},{default:a(()=>[v(" Add new vehicle ")]),_:1})])]),_:1}),e($),e(t(ee),{"items-per-page":t(d),"onUpdate:itemsPerPage":r[2]||(r[2]=l=>V(d)?d.value=l:null),page:t(n),"onUpdate:page":r[3]||(r[3]=l=>V(n)?n.value=l:null),items:t(M),"items-length":t(P),headers:j,class:"text-no-wrap","onUpdate:options":y},{"item.name":a(({item:l})=>[v(k(l.name),1)]),"item.status":a(({item:l})=>[e(Y,{color:"success",size:"small",label:""},{default:a(()=>[v(k(l.status),1)]),_:2},1024)]),bottom:a(()=>[e($),S("div",ue,[S("p",de,k(t(ae)({page:t(n),itemsPerPage:t(d)},t(P))),1),e(Z,{modelValue:t(n),"onUpdate:modelValue":r[1]||(r[1]=l=>V(n)?n.value=l:null),length:Math.ceil(t(P)/t(d)),"total-visible":f.$vuetify.display.xs?1:Math.ceil(t(P)/t(d))},{prev:a(l=>[e(D,q({variant:"tonal",color:"default"},l,{icon:!1}),{default:a(()=>[v(" Previous ")]),_:2},1040)]),next:a(l=>[e(D,q({variant:"tonal",color:"default"},l,{icon:!1}),{default:a(()=>[v(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),e(re,{isDrawerOpen:t(u),"onUpdate:isDrawerOpen":r[4]||(r[4]=l=>V(u)?u.value=l:null),onRobotData:g},null,8,["isDrawerOpen"])])}}};export{$e as default};
