import{a as Se}from"./VTextField-9e0db051.js";import{c as ke,b as xe,V as De,p as Te}from"./VPagination-12c164ba.js";import{a4 as V,aZ as te,o as H,c as j,m as v,f as ue,y as Ce,b as n,a_ as Be,h as Me,e as g,z as de,a$ as ae,b0 as le,x as Pe,a as ce,d as O,v as W,a0 as ve,aG as I,aT as Ee,G as me,w as A,b1 as fe,b2 as $e,a8 as Ne,b3 as Ue,ah as Ie,b4 as Oe,b5 as Ae,al as Re,ai as He,am as qe,aa as Le,aI as Ye,az as ze,b6 as Fe,an as oe,$ as ne,b7 as We,aJ as Xe,ao as je,b8 as Ze,ab as Ge,r as D,b9 as Je,ba as z,bb as Qe,bc as Ke,aS as et,ad as tt,q as L,T as at,F as lt,aD as X,a2 as E,a5 as ot,a6 as R,t as U,au as nt}from"./main-2cb2b578.js";import{r as F,e as st}from"./validators-4dbf72f5.js";import{V as rt,_ as it}from"./VForm-840abb27.js";import{V as pe}from"./VSpacer-3a84d0f2.js";import{P as ut}from"./vue3-perfect-scrollbar.esm-effa8f6a.js";import{V as ge}from"./VCard-575e6640.js";import{V as he}from"./VCardText-ea2b6af0.js";import{V as dt,a as q}from"./VRow-2d945f26.js";import{u as ct}from"./VOverlay-2109dfb8.js";import{u as vt}from"./VList-c5f88d3d.js";import{$ as mt}from"./api-685b8030.js";import{u as ft}from"./useApi-25637206.js";import{c as pt}from"./createUrl-52adfe9a.js";import{V as se}from"./VDivider-f8ff953e.js";import"./VImg-bfa166fc.js";import"./forwardRefs-6ea3df5c.js";import"./dialog-transition-fac27d0a.js";import"./VMenu-5c38851d.js";import"./VCheckboxBtn-1d478489.js";import"./VAvatar-9b4c7a0e.js";import"./index-51d05da2.js";const gt=Object.assign({name:"AppSelect",inheritAttrs:!1},{__name:"AppSelect",setup(e){const c=V(()=>{const l=te(),t=l.id||l.label;return t?`app-select-${t}-${Math.random().toString(36).slice(2,7)}`:void 0}),m=V(()=>te().label);return(l,t)=>(H(),j("div",{class:Pe(["app-select flex-grow-1",l.$attrs.class])},[v(m)?(H(),ue(Se,{key:0,for:v(c),class:"mb-1 text-body-2 text-high-emphasis",text:v(m)},null,8,["for","text"])):Ce("",!0),n(ke,ae(le({...l.$attrs,class:null,label:void 0,variant:"outlined",id:v(c),menuProps:{contentClass:["app-inner-list","app-select__content","v-select__content",l.$attrs.multiple!==void 0?"v-list-select-multiple":""]}})),Be({_:2},[Me(l.$slots,(a,f)=>({name:f,fn:g(y=>[de(l.$slots,f,ae(le(y||{})))])}))]),1040)],2))}}),ht={class:"pa-6 d-flex align-center"},wt={class:"text-h5"},yt={__name:"AppDrawerHeaderSection",props:{title:{type:String,required:!0}},emits:["cancel"],setup(e,{emit:c}){const m=e;return(l,t)=>{const a=ce("IconBtn");return H(),j("div",ht,[O("h5",wt,W(m.title),1),n(pe),de(l.$slots,"beforeClose"),n(a,{variant:"tonal",class:"rounded",size:"32",onClick:t[0]||(t[0]=f=>l.$emit("cancel"))},{default:g(()=>[n(ve,{size:"18",icon:"tabler-x"})]),_:1})])}}};function bt(e){let{rootEl:c,isSticky:m,layoutItemStyles:l}=e;const t=I(!1),a=I(0),f=V(()=>{const b=typeof t.value=="boolean"?"top":t.value;return[m.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[b]:Ee(a.value)}:{top:l.value.top}]});me(()=>{A(m,b=>{b?window.addEventListener("scroll",_,{passive:!0}):window.removeEventListener("scroll",_)},{immediate:!0})}),fe(()=>{window.removeEventListener("scroll",_)});let y=0;function _(){const b=y>window.scrollY?"up":"down",i=c.value.getBoundingClientRect(),d=parseFloat(l.value.top??0),s=window.scrollY-Math.max(0,a.value-d),u=i.height+Math.max(a.value,d)-window.scrollY-window.innerHeight,h=parseFloat(getComputedStyle(c.value).getPropertyValue("--v-body-scroll-y"))||0;i.height<window.innerHeight-d?(t.value="top",a.value=d):b==="up"&&t.value==="bottom"||b==="down"&&t.value==="top"?(a.value=window.scrollY+i.top-h,t.value=!0):b==="down"&&u<=0?(a.value=0,t.value="bottom"):b==="up"&&s<=0&&(h?t.value!=="top"&&(a.value=-s+h+d,t.value="top"):(a.value=i.top+s,t.value="top")),y=window.scrollY}return{isStuck:t,stickyStyles:f}}const Vt=100,_t=20;function re(e){const c=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*c}function ie(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let c=0;for(let m=e.length-1;m>0;m--){if(e[m].t===e[m-1].t)continue;const l=re(c),t=(e[m].d-e[m-1].d)/(e[m].t-e[m-1].t);c+=(t-l)*Math.abs(t),m===e.length-1&&(c*=.5)}return re(c)*1e3}function St(){const e={};function c(t){Array.from(t.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new $e(_t))).push([t.timeStamp,a])})}function m(t){Array.from(t.changedTouches).forEach(a=>{delete e[a.identifier]})}function l(t){var b;const a=(b=e[t])==null?void 0:b.values().reverse();if(!a)throw new Error(`No samples for touch id ${t}`);const f=a[0],y=[],_=[];for(const i of a){if(f[0]-i[0]>Vt)break;y.push({t:i[0],d:i[1].clientX}),_.push({t:i[0],d:i[1].clientY})}return{x:ie(y),y:ie(_),get direction(){const{x:i,y:d}=this,[s,u]=[Math.abs(i),Math.abs(d)];return s>u&&i>=0?"right":s>u&&i<=0?"left":u>s&&d>=0?"down":u>s&&d<=0?"up":kt()}}}return{addMovement:c,endTouch:m,getVelocity:l}}function kt(){throw new Error}function xt(e){let{isActive:c,isTemporary:m,width:l,touchless:t,position:a}=e;me(()=>{window.addEventListener("touchstart",$,{passive:!0}),window.addEventListener("touchmove",C,{passive:!1}),window.addEventListener("touchend",T,{passive:!0})}),fe(()=>{window.removeEventListener("touchstart",$),window.removeEventListener("touchmove",C),window.removeEventListener("touchend",T)});const f=V(()=>["left","right"].includes(a.value)),{addMovement:y,endTouch:_,getVelocity:b}=St();let i=!1;const d=I(!1),s=I(0),u=I(0);let h;function S(r,p){return(a.value==="left"?r:a.value==="right"?document.documentElement.clientWidth-r:a.value==="top"?r:a.value==="bottom"?document.documentElement.clientHeight-r:N())-(p?l.value:0)}function k(r){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const o=a.value==="left"?(r-u.value)/l.value:a.value==="right"?(document.documentElement.clientWidth-r-u.value)/l.value:a.value==="top"?(r-u.value)/l.value:a.value==="bottom"?(document.documentElement.clientHeight-r-u.value)/l.value:N();return p?Math.max(0,Math.min(1,o)):o}function $(r){if(t.value)return;const p=r.changedTouches[0].clientX,o=r.changedTouches[0].clientY,x=25,M=a.value==="left"?p<x:a.value==="right"?p>document.documentElement.clientWidth-x:a.value==="top"?o<x:a.value==="bottom"?o>document.documentElement.clientHeight-x:N(),P=c.value&&(a.value==="left"?p<l.value:a.value==="right"?p>document.documentElement.clientWidth-l.value:a.value==="top"?o<l.value:a.value==="bottom"?o>document.documentElement.clientHeight-l.value:N());(M||P||c.value&&m.value)&&(i=!0,h=[p,o],u.value=S(f.value?p:o,c.value),s.value=k(f.value?p:o),_(r),y(r))}function C(r){const p=r.changedTouches[0].clientX,o=r.changedTouches[0].clientY;if(i){if(!r.cancelable){i=!1;return}const M=Math.abs(p-h[0]),P=Math.abs(o-h[1]);(f.value?M>P&&M>3:P>M&&P>3)?(d.value=!0,i=!1):(f.value?P:M)>3&&(i=!1)}if(!d.value)return;r.preventDefault(),y(r);const x=k(f.value?p:o,!1);s.value=Math.max(0,Math.min(1,x)),x>1?u.value=S(f.value?p:o,!0):x<0&&(u.value=S(f.value?p:o,!1))}function T(r){if(i=!1,!d.value)return;y(r),d.value=!1;const p=b(r.changedTouches[0].identifier),o=Math.abs(p.x),x=Math.abs(p.y);(f.value?o>x&&o>400:x>o&&x>3)?c.value=p.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||N()):c.value=s.value>.5}const w=V(()=>d.value?{transform:a.value==="left"?`translateX(calc(-100% + ${s.value*l.value}px))`:a.value==="right"?`translateX(calc(100% - ${s.value*l.value}px))`:a.value==="top"?`translateY(calc(-100% + ${s.value*l.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${s.value*l.value}px))`:N(),transition:"none"}:void 0);return{isDragging:d,dragProgress:s,dragStyles:w}}function N(){throw new Error}const Dt=["start","end","left","right","top","bottom"],Tt=Ne({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Dt.includes(e)},sticky:Boolean,...Ue(),...Ie(),...Oe(),...Ae(),...Re(),...He({tag:"nav"}),...qe()},"VNavigationDrawer"),Ct=Le()({name:"VNavigationDrawer",props:Tt(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,c){let{attrs:m,emit:l,slots:t}=c;const{isRtl:a}=Ye(),{themeClasses:f}=ze(e),{borderClasses:y}=Fe(e),{backgroundColorClasses:_,backgroundColorStyles:b}=oe(ne(e,"color")),{elevationClasses:i}=We(e),{mobile:d}=Xe(),{roundedClasses:s}=je(e),u=Ze(),h=Ge(e,"modelValue",null,B=>!!B),{ssrBootStyles:S}=vt(),{scopeId:k}=ct(),$=D(),C=I(!1),T=V(()=>e.rail&&e.expandOnHover&&C.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),w=V(()=>Je(e.location,a.value)),r=V(()=>!e.permanent&&(d.value||e.temporary)),p=V(()=>e.sticky&&!r.value&&w.value!=="bottom");z(()=>e.expandOnHover&&e.rail!=null,()=>{A(C,B=>l("update:rail",!B))}),z(()=>!e.disableResizeWatcher,()=>{A(r,B=>!e.permanent&&X(()=>h.value=!B))}),z(()=>!e.disableRouteWatcher&&!!u,()=>{A(u.currentRoute,()=>r.value&&(h.value=!1))}),A(()=>e.permanent,B=>{B&&(h.value=!0)}),Qe(()=>{e.modelValue!=null||r.value||(h.value=e.permanent||!d.value)});const{isDragging:o,dragProgress:x,dragStyles:M}=xt({isActive:h,isTemporary:r,width:T,touchless:ne(e,"touchless"),position:w}),P=V(()=>{const B=r.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):T.value;return o.value?B*x.value:B}),{layoutItemStyles:Y,layoutItemScrimStyles:we}=Ke({id:e.name,order:V(()=>parseInt(e.order,10)),position:w,layoutSize:P,elementSize:T,active:V(()=>h.value||o.value),disableTransitions:V(()=>o.value),absolute:V(()=>e.absolute||p.value&&typeof Z.value!="string")}),{isStuck:Z,stickyStyles:ye}=bt({rootEl:$,isSticky:p,layoutItemStyles:Y}),G=oe(V(()=>typeof e.scrim=="string"?e.scrim:null)),be=V(()=>({...o.value?{opacity:x.value*.2,transition:"none"}:void 0,...we.value}));et({VList:{bgColor:"transparent"}});function Ve(){C.value=!0}function _e(){C.value=!1}return tt(()=>{const B=t.image||e.image;return n(lt,null,[n(e.tag,L({ref:$,onMouseenter:Ve,onMouseleave:_e,class:["v-navigation-drawer",`v-navigation-drawer--${w.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":C.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":r.value,"v-navigation-drawer--active":h.value,"v-navigation-drawer--sticky":p.value},f.value,_.value,y.value,i.value,s.value,e.class],style:[b.value,Y.value,M.value,S.value,ye.value,e.style]},k,m),{default:()=>{var J,Q,K,ee;return[B&&n("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?(J=t.image)==null?void 0:J.call(t,{image:e.image}):n("img",{src:e.image,alt:""},null)]),t.prepend&&n("div",{class:"v-navigation-drawer__prepend"},[(Q=t.prepend)==null?void 0:Q.call(t)]),n("div",{class:"v-navigation-drawer__content"},[(K=t.default)==null?void 0:K.call(t)]),t.append&&n("div",{class:"v-navigation-drawer__append"},[(ee=t.append)==null?void 0:ee.call(t)])]}}),n(at,{name:"fade-transition"},{default:()=>[r.value&&(o.value||h.value)&&!!e.scrim&&n("div",L({class:["v-navigation-drawer__scrim",G.backgroundColorClasses.value],style:[be.value,G.backgroundColorStyles.value],onClick:()=>h.value=!1},k),null)]})])}),{isStuck:Z}}}),Bt={__name:"AddNewUserDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(e,{emit:c}){const m=e,l=c,t=D(!1),a=D(),f=D(""),y=D(""),_=D(""),b=()=>{l("update:isDrawerOpen",!1),X(()=>{var s,u;(s=a.value)==null||s.reset(),(u=a.value)==null||u.resetValidation()})},i=()=>{var s;(s=a.value)==null||s.validate().then(({valid:u})=>{u&&(l("userData",{id:0,name:f.value,email:y.value,password:_.value}),l("update:isDrawerOpen",!1),X(()=>{var h,S;(h=a.value)==null||h.reset(),(S=a.value)==null||S.resetValidation()}))})},d=s=>{l("update:isDrawerOpen",s)};return(s,u)=>{const h=yt,S=it;return H(),ue(Ct,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":m.isDrawerOpen,"onUpdate:modelValue":d},{default:g(()=>[n(h,{title:"Add User",onCancel:b}),n(v(ut),{options:{wheelPropagation:!1}},{default:g(()=>[n(ge,{flat:""},{default:g(()=>[n(he,null,{default:g(()=>[n(rt,{ref_key:"refForm",ref:a,modelValue:v(t),"onUpdate:modelValue":u[3]||(u[3]=k=>E(t)?t.value=k:null),onSubmit:ot(i,["prevent"])},{default:g(()=>[n(dt,null,{default:g(()=>[n(q,{cols:"12"},{default:g(()=>[n(S,{modelValue:v(f),"onUpdate:modelValue":u[0]||(u[0]=k=>E(f)?f.value=k:null),rules:["requiredValidator"in s?s.requiredValidator:v(F)],label:"Full Name",placeholder:"John Doe"},null,8,["modelValue","rules"])]),_:1}),n(q,{cols:"12"},{default:g(()=>[n(S,{modelValue:v(y),"onUpdate:modelValue":u[1]||(u[1]=k=>E(y)?y.value=k:null),rules:["requiredValidator"in s?s.requiredValidator:v(F),"emailValidator"in s?s.emailValidator:v(st)],label:"Email",placeholder:"johndoe@email.com"},null,8,["modelValue","rules"])]),_:1}),n(q,{cols:"12"},{default:g(()=>[n(S,{modelValue:v(_),"onUpdate:modelValue":u[2]||(u[2]=k=>E(_)?_.value=k:null),type:"password",rules:["requiredValidator"in s?s.requiredValidator:v(F)],label:"Password"},null,8,["modelValue","rules"])]),_:1}),n(q,{cols:"12"},{default:g(()=>[n(R,{type:"submit",class:"me-3"},{default:g(()=>[U(" Submit ")]),_:1}),n(R,{type:"reset",variant:"outlined",color:"secondary",onClick:b},{default:g(()=>[U(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Mt={class:"me-3 d-flex gap-3"},Pt={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Et={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},$t={class:"text-sm text-disabled mb-0"},la={__name:"list",async setup(e){let c,m;const l=D(!1),t=async T=>{await mt("/dashboard/admin/user",{method:"POST",body:T}),k()},a=[{title:"User",key:"name"},{title:"Email",key:"email"},{title:"Created at",key:"created_at"},{title:"Actions",key:"actions",sortable:!1}],f=D(""),y=D(),_=D(),b=D(),i=D(10),d=D(1),s=D(),u=D(),h=T=>{var w,r;d.value=T.page,s.value=(w=T.sortBy[0])==null?void 0:w.key,u.value=(r=T.sortBy[0])==null?void 0:r.order},{data:S,execute:k}=([c,m]=nt(()=>ft(pt("/dashboard/admin/user",{query:{q:f,status:b,plan:_,role:y,itemsPerPage:i,page:d,sortBy:s,orderBy:u}}))),c=await c,m(),c),$=V(()=>S.value.result.data),C=V(()=>S.value.result.total);return(T,w)=>{const r=gt,p=ce("IconBtn");return H(),j("section",null,[n(ge,null,{default:g(()=>[n(he,{class:"d-flex flex-wrap py-4 gap-4"},{default:g(()=>[O("div",Mt,[n(r,{"model-value":v(i),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"6.25rem"},"onUpdate:modelValue":w[0]||(w[0]=o=>i.value=parseInt(o,10))},null,8,["model-value"])]),n(pe),O("div",Pt,[n(R,{"prepend-icon":"tabler-plus",onClick:w[1]||(w[1]=o=>l.value=!0)},{default:g(()=>[U(" Add New User ")]),_:1})])]),_:1}),n(se),n(v(De),{"items-per-page":v(i),"onUpdate:itemsPerPage":w[3]||(w[3]=o=>E(i)?i.value=o:null),page:v(d),"onUpdate:page":w[4]||(w[4]=o=>E(d)?d.value=o:null),items:v($),"items-length":v(C),headers:a,class:"text-no-wrap","onUpdate:options":h},{"item.created_at":g(({item:o})=>[U(W(new Date(o.created_at).toDateString()),1)]),"item.actions":g(({item:o})=>[n(p,{to:{name:"users-id",params:{id:o.id}}},{default:g(()=>[n(ve,{icon:"tabler-eye"})]),_:2},1032,["to"])]),bottom:g(()=>[n(se),O("div",Et,[O("p",$t,W(v(Te)({page:v(d),itemsPerPage:v(i)},v(C))),1),n(xe,{modelValue:v(d),"onUpdate:modelValue":w[2]||(w[2]=o=>E(d)?d.value=o:null),length:Math.ceil(v(C)/v(i)),"total-visible":T.$vuetify.display.xs?1:Math.ceil(v(C)/v(i))},{prev:g(o=>[n(R,L({variant:"tonal",color:"default"},o,{icon:!1}),{default:g(()=>[U(" Previous ")]),_:2},1040)]),next:g(o=>[n(R,L({variant:"tonal",color:"default"},o,{icon:!1}),{default:g(()=>[U(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1}),n(Bt,{isDrawerOpen:v(l),"onUpdate:isDrawerOpen":w[5]||(w[5]=o=>E(l)?l.value=o:null),onUserData:t},null,8,["isDrawerOpen"])])}}};export{la as default};
